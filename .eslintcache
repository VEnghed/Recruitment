[{"C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\index.js":"1","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\App.js":"2","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\success.js":"3","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\register\\register.js":"4","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\applicationpageview\\applicationpage.js":"5","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\header\\header.js":"6","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\recruiterpage\\recruiter.js":"7","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\login\\login.js":"8","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\applicationdetails\\applicationpagepresenter.js":"9","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\applicationdetails\\applicationdetails.js":"10"},{"size":230,"mtime":1614595597089,"results":"11","hashOfConfig":"12"},{"size":1241,"mtime":1615280322921,"results":"13","hashOfConfig":"12"},{"size":189,"mtime":1614595597088,"results":"14","hashOfConfig":"12"},{"size":3582,"mtime":1615280322938,"results":"15","hashOfConfig":"12"},{"size":12446,"mtime":1615292237990,"results":"16","hashOfConfig":"12"},{"size":400,"mtime":1615280296040,"results":"17","hashOfConfig":"12"},{"size":4476,"mtime":1615283477585,"results":"18","hashOfConfig":"12"},{"size":1435,"mtime":1615280296040,"results":"19","hashOfConfig":"12"},{"size":3712,"mtime":1615291440993,"results":"20","hashOfConfig":"12"},{"size":5764,"mtime":1615291432018,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"147cgox",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"35","usedDeprecatedRules":"24"},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"42","usedDeprecatedRules":"24"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45"},"C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\index.js",[],["46","47"],"C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\App.js",[],"C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\success.js",[],"C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\register\\register.js",[],"C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\applicationpageview\\applicationpage.js",[],"C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\header\\header.js",["48"],"import './header.css'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\n/**\r\n * An reusable header for all pages,\r\n * Sends the user back to the start page on click\r\n * @returns the header component\r\n */\r\nfunction Header() {\r\n    return (\r\n        <header className=\"header\">\r\n            <h2 onClick={() => window.location = '/'}>Recruitment</h2>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\recruiterpage\\recruiter.js",[],"C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\login\\login.js",[],"C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\applicationdetails\\applicationpagepresenter.js",["49"],"import React, { useState, useEffect} from \"react\";\r\nimport {useParams} from 'react-router-dom';\r\nimport ApplicationDetails from './applicationdetails.js';\r\n\r\nfunction DetailspagePresenter() {\r\n    let [application, setApplication] = useState(\"Loading...\");\r\n    let myToken = window.localStorage.getItem(\"token\");\r\n    let [msgToUser, setMsgToUser] = useState(\"\");\r\n    let {id} = useParams();\r\n\r\n    /**\r\n     * @description Fetch application information from server (database), \r\n     * the application is identified by a parameter in the page url\r\n     */\r\n    function fetchInfo() {\r\n        console.log(\"FETCHING DETAILS\");\r\n        fetch('/application/det/' + id, {\r\n            method: 'GET',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Bearer ' + myToken\r\n            }\r\n        }).then(response => {\r\n            //If something went wrong with saving application\r\n            console.log(response);\r\n            if (response.status === 500) { // internal error\r\n                console.log(\"internal error\");\r\n                setApplication(\"\");\r\n                setMsgToUser(\"Could not get application, internal server error, please try again\");\r\n            }\r\n            else if (response.status === 200) {\r\n                console.log(\"Success\");\r\n                response.json().then(body => {\r\n                    let deets = body.applicationDetails;\r\n                    console.log(JSON.stringify(body.applicationDetails));\r\n                    let userdata = {firstname: deets[0].firstname, lastname: deets[0].lastname, username:deets[0].username, email: deets[0].email};\r\n                    let appDetailsComponent = <ApplicationDetails\r\n                                                userdata={userdata}\r\n                                                availabilities={deets[0].availabilities} \r\n                                                competencies={deets[0].competences}\r\n                                                applicationStatus={deets[0].applicationStatuses}/>;\r\n                    setApplication(appDetailsComponent)\r\n                });\r\n            }\r\n            else if(response.status === 400) {\r\n                console.log(\"Wrong input\");\r\n                //console.log(response)\r\n                let errorsInRes = response.statusText;\r\n                console.log(errorsInRes);\r\n                setMsgToUser(\"Could not load application details: \" + errorsInRes)\r\n            }\r\n            else if (response.status === 401) {\r\n                window.location = \"/\"; \r\n            }\r\n            else if (response.status === 302) {\r\n                console.log(\"redirect\");\r\n                window.location = \"/\" ;\r\n            }\r\n        }).catch(err => {\r\n            console.log(\"something went wrong\" + err);\r\n        });\r\n\r\n    }\r\n\r\n    /**\r\n     * @description When component mounts, this function will be called which fetches the details of the application in question\r\n     * The application is identified through the page url\r\n     */\r\n    useEffect(() => {\r\n        fetchInfo();\r\n        console.log(\"mount   \" + JSON.stringify(application))\r\n        }, []\r\n    );\r\n\r\n   \r\n\r\n    return (\r\n        <div className=\"applicationdetails\">\r\n            <h3>Applicationdetails page</h3>\r\n            <div id=\"applicationdetails-content\">    \r\n            \r\n            \r\n            {/*Application details component goes here when it gets rendered*/}\r\n            <div id=\"applicationdetails-component\">{application}</div>\r\n            <p>{msgToUser}</p>\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default DetailspagePresenter;","C:\\Users\\erikb\\Documents\\IV1201 ArkitekturoDesign\\Recruitment\\src\\components\\applicationdetails\\applicationdetails.js",["50","51"],"import './applicationdetails.css';\r\nimport React, { useState, useEffect} from \"react\";\r\nimport {useParams} from 'react-router-dom';\r\n\r\n/**\r\n * @description Function for the application-details page, generates all necessary frontend\r\n * @param {*} props used for sending data\r\n * @returns A react component with frontend HTML.\r\n */\r\nfunction ApplicationDetails(props) { \r\n    let [availabilities, setAvailabilities] = useState(\"\");\r\n    let [competencies, setCompetencies] = useState(\"\");\r\n    let [status, setStatus] = useState(\"\");\r\n    let [msgToUser, setMsgToUser] = useState(\"\");\r\n    let myToken = window.localStorage.getItem(\"token\");\r\n    \r\n    /**\r\n     * Creates list items containing the important availabilities data\r\n     * @param {*} themProps Contains the data\r\n     */\r\n    function listAvailabilities(themProps) {\r\n        console.log(\"props \" + JSON.stringify(themProps));\r\n        let avails = themProps.availabilities;\r\n        let avs = avails.map(av => (\r\n            <li><p>From: {av.from_date}, To: {av.to_date}</p></li>\r\n        ));\r\n        setAvailabilities(avs);\r\n    }\r\n\r\n    /**\r\n     * Creates list items containing the important competencies data\r\n     * @param {*} themProps Contains the data\r\n     */\r\n    function listCompetencies(themProps) {\r\n        let comps = themProps.competencies;\r\n\r\n\r\n        let cmps = comps.map(cmp => (\r\n            <li><p>Competence: {cmp.name}, Years experience: {cmp.competenceprofile.years_of_experience}</p></li>\r\n        ));\r\n        setCompetencies(cmps);\r\n    }\r\n    /**\r\n     * Creates elements with important application data.\r\n     * @param {*} themProps Contains the data\r\n     */\r\n    function listAppStatus(themProps) {\r\n        let appStatus = themProps.applicationStatus;\r\n        let stats = appStatus.map(st => (\r\n            <li><p>Application Date: {st.application_date}, Application status: {st.status}</p></li>\r\n        ));\r\n        setStatus(stats);\r\n    }\r\n\r\n\r\n    /**\r\n     * @description When component mounts, this function will be called which creates html elements containing data\r\n     */\r\n    useEffect(() => {\r\n        listAvailabilities(props);\r\n        listCompetencies(props);\r\n        listAppStatus(props);\r\n        console.log(\"details listed\");\r\n        }, []\r\n    );\r\n\r\n     /**\r\n     * @description Is called when user clicks accepted button, which means the application is accepted\r\n     */\r\n    function onAcceptClick() {\r\n        let statusChange = {};\r\n        statusChange.person = props.userdata.username;\r\n        statusChange.applicationStatus = \"accepted\";\r\n        postStatus(statusChange);\r\n    }\r\n\r\n    /**\r\n     * @description Is called when user clicks Rejected button, which means the application is rejected\r\n     */\r\n    function onRejectClick() {\r\n        let statusChange = {};\r\n        statusChange.person = props.userdata.username;\r\n        statusChange.applicationStatus = \"rejected\";\r\n        console.log(statusChange);\r\n        postStatus(statusChange);\r\n    }\r\n\r\n    /**\r\n     * @description Sends a post request to server which in turn changes an applications status according to @param statusChange\r\n     * @param {*} statusChange The change in the applications status.\r\n     */\r\n    function postStatus(statusChange) {\r\n        fetch('/application/status', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n                'Authorization': 'Bearer ' + myToken\r\n            },\r\n            body: JSON.stringify(statusChange)\r\n        }).then(response => {\r\n            //If something went wrong with saving application\r\n            if(response.status === 500) {   // internal error\r\n                console.log(\"internal error\")\r\n                setMsgToUser(\"Could not save application status, internal server error, please try again\")\r\n                \r\n            } \r\n            else if(response.status === 200) {    \r\n                console.log(\"Success\")\r\n                setMsgToUser(\"Application status saved\")\r\n            }\r\n            else if (response.status === 302) {\r\n                console.log(\"redirect\")\r\n                window.location = \"/\" \r\n            }\r\n            else if (response.status === 401) {\r\n                window.location = \"/\"; \r\n            }\r\n            else if(response.status === 400) {\r\n                console.log(\"Wrong input\")\r\n                //console.log(response)\r\n                let errorsInRes = response.statusText;\r\n                console.log(errorsInRes);\r\n                setMsgToUser(\"Could not save application status: \" + errorsInRes)\r\n            }\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"applicationdetails\">\r\n            <div id=\"userdata\">\r\n                <div id=\"names\">\r\n                    <p>Firstname: {props.userdata.firstname}</p><p>Lastname: {props.userdata.lastname}</p>\r\n                    <p>Username: {props.userdata.username}</p><p>Email: {props.userdata.email}</p>\r\n                </div>\r\n            </div>\r\n            <div id=\"availabilities\">\r\n                <ul id=\"dates\">\r\n                    {availabilities}\r\n                </ul>\r\n            </div>\r\n            <div id=\"competencies\">\r\n                <ul id=\"comps\">\r\n                    {competencies}\r\n                </ul>\r\n            </div>\r\n            <div id=\"applicationStatus\">\r\n                <ul id=\"status\">\r\n                    {status}\r\n                </ul>\r\n            </div>\r\n            <div></div>\r\n\r\n            <p>{msgToUser}</p>\r\n            <button onClick={() => onAcceptClick()}>Accept</button>\r\n            <button onClick={() => onRejectClick()}>Reject</button>\r\n        </div>\r\n\r\n    );\r\n}\r\nexport default ApplicationDetails;",{"ruleId":"52","replacedBy":"53"},{"ruleId":"54","replacedBy":"55"},{"ruleId":"56","severity":1,"message":"57","line":2,"column":10,"nodeType":"58","messageId":"59","endLine":2,"endColumn":18},{"ruleId":"60","severity":1,"message":"61","line":73,"column":12,"nodeType":"62","endLine":73,"endColumn":14,"suggestions":"63"},{"ruleId":"56","severity":1,"message":"64","line":3,"column":9,"nodeType":"58","messageId":"59","endLine":3,"endColumn":18},{"ruleId":"60","severity":1,"message":"65","line":64,"column":12,"nodeType":"62","endLine":64,"endColumn":14,"suggestions":"66"},"no-native-reassign",["67"],"no-negated-in-lhs",["68"],"no-unused-vars","'Redirect' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'application' and 'fetchInfo'. Either include them or remove the dependency array.","ArrayExpression",["69"],"'useParams' is defined but never used.","React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array.",["70"],"no-global-assign","no-unsafe-negation",{"desc":"71","fix":"72"},{"desc":"73","fix":"74"},"Update the dependencies array to be: [application, fetchInfo]",{"range":"75","text":"76"},"Update the dependencies array to be: [props]",{"range":"77","text":"78"},[3230,3232],"[application, fetchInfo]",[2258,2260],"[props]"]
